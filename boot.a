;=====================================
; nasmw boot.asm -f bin -o boot.bin
; partcopy boot.bin 0 200 -f0

[ORG 0x7c00]      ; add to offsets
 jmp main
 
%include "print.inc"
%include "keyboard.inc"

main:
   xor ax, ax    ; make it zero
   mov ds, ax   ; DS=0
   mov ss, ax   ; stack starts at 0
   mov sp, 0x9c00   ; 200h past code start
 
   call setDisplayPointer
   call setupkeyboard
   
loop:
   mov si, msg   ; show text string
   call sprint
   dec byte [counter]
   jnz loop
   
   call scroll
   
   mov si, msg2
   call sprint
   
   mov ax, [display]   ; look at video mem
   mov gs, ax
   mov bx, 0x0000   ; 'W'=57 attrib=0F
   mov ax, [gs:bx]
 
   mov  word [reg16], ax ;look at register
   call printreg16
 
hang:
   jmp hang
msg   db "1234567890123456789012345678901234567890123456789012345678901234567890123456789", 0
msg2   db "What are you doing, Dave?", 0
counter db 23; Counter
times 510-($-$$) db 0
db 0x55
db 0xAA
;==================================